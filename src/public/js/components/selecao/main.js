// Generated by CoffeeScript 2.7.0
define(['./controller', './routes', 'utils'], function(controller, routes, utils) {
  return function(component, parentApp, Backbone, Marionette, $, _) {
    var key, path, prefixedRoutes, val;
    prefixedRoutes = {};
    for (key in routes) {
      val = routes[key];
      path = `comp/${this.moduleName}${key}`;
      prefixedRoutes[path] = val;
    }
    parentApp.appRouter.processAppRoutes(controller, prefixedRoutes);
    component = _.findWhere(window.modulo.components, {
      folder: this.moduleName
    });
    parentApp.casos = component.resource.casos.map(function(caso) {
      var dataBr, oid, tsPart, unixTs;
      oid = caso._id;
      tsPart = oid.slice(0, 8);
      unixTs = parseInt(tsPart, 16);
      dataBr = (new utils.databr(unixTs, {
        charMes: 0
      })).fabricate();
      caso.dataBr = dataBr;
      return caso;
    });
    parentApp.selecao = component.resource;
    return parentApp.selecao.titulo = component.title;
  };
});
