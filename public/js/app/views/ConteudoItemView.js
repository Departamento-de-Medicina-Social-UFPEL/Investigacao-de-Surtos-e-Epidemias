// Generated by CoffeeScript 2.7.0
define(['backbone.marionette', './ModalElegivel'], function(Marionette, ModalElegivel) {
  var ConteudoItemView;
  return ConteudoItemView = (function() {
    class ConteudoItemView extends Marionette.ItemView {
      initialize() {
        if (!this.model.get('cor')) {
          this.model.set('corFonte', '#' + window.modulo.corPadrao);
          this.model.set('corIntro', 'eee');
          this.model.set('corElementos', window.modulo.corPadrao);
          this.model.set('unidade', false);
        } else {
          this.model.set('corFonte', 'white');
          this.model.set('corIntro', this.model.get('cor'));
          this.model.set('corElementos', this.model.get('cor'));
        }
        return this.className = this.model.get('style' || '');
      }

      avisaConclusaoRequisitos() {
        var conteudo, jaAvisou, key, modelo;
        conteudo = this.model.get('nucleo');
        if (this.model.get('elegivel')) {
          key = App.user.cpf + '_fl_elegivel_' + this.model.get('id_arouca');
          jaAvisou = App.local.get(key);
          if (!jaAvisou) {
            App.local.set(key, true);
            if (App.modals.currentView) {
              App.modals.destroyAll();
            }
            modelo = new Backbone.Model({
              conteudo: conteudo
            });
            return App.modals.show(new ModalElegivel({
              model: modelo
            }));
          }
        }
      }

      onRender() {
        return this.avisaConclusaoRequisitos();
      }

    };

    ConteudoItemView.prototype.tagName = 'div';

    ConteudoItemView.prototype.className = 'conteudo';

    ConteudoItemView.prototype.template = _.template($('#item-conteudo-drop-template').html(), {
      interpolate: /\<\@\=(.+?)\@\>/gim,
      evaluate: /\<\@([\s\S]+?)\@\>/gim,
      escape: /\<\@\-(.+?)\@\>/gim
    });

    ConteudoItemView.prototype.ui = {
      'progresso': '.progresso-item'
    };

    return ConteudoItemView;

  }).call(this);
});
