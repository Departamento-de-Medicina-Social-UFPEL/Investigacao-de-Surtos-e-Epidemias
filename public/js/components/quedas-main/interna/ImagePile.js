// Generated by CoffeeScript 1.8.0
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define([], function() {
  var PilhaImagensChild;
  return PilhaImagensChild = (function(_super) {
    __extends(PilhaImagensChild, _super);

    function PilhaImagensChild() {
      return PilhaImagensChild.__super__.constructor.apply(this, arguments);
    }

    PilhaImagensChild.prototype.tagName = 'img';

    PilhaImagensChild.prototype.template = function(a) {
      return _.template("", a);
    };

    PilhaImagensChild.prototype.className = function() {
      return 'imagem-orienta ' + this.model.get('url');
    };

    PilhaImagensChild.prototype.onRender = function(view) {
      var ori, popPos, pos, scale, _ref;
      if (view.model.get('el')) {
        this.$el.hide();
        return null;
      }
      pos = view.model.get('pos');
      scale = view.model.get('scale');
      ori = view.model.get('ori');
      popPos = "" + ((_ref = view.model.get('popPos')) != null ? _ref : 'auto right');
      this.$el.attr({
        src: view.model.get('src'),
        certo: view.model.get('certo'),
        ori: ori.nome,
        tabindex: 2
      });
      this.$el.css({
        top: pos[1] + '%',
        left: pos[0] + '%',
        width: scale + '%'
      });
      return this.addPopOver(this.el, ori, popPos);
    };

    PilhaImagensChild.prototype.addPopOver = function(el, ori, popPos) {
      $(el).popover({
        animation: true,
        content: ori.orientacao,
        title: ori.titulo,
        trigger: 'maunal focus',
        container: 'body',
        html: true,
        delay: {
          show: 300,
          hide: 100
        },
        placement: popPos
      });
      $(el).on('shown.bs.popover', function() {
        return window.openPop = $(this);
      });
      return $(el).on('hidden.bs.popover', function() {
        return window.openPop = null;
      });
    };

    return PilhaImagensChild;

  })(Marionette.ItemView);
});
