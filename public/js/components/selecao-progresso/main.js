// Generated by CoffeeScript 2.7.0

// '../../ProgressoCollection'
define(['./controller', './routes', './models/Caso', 'utils'], function(controller, routes, Caso, utils) {
  return function(component, parentApp, Backbone, Marionette, $, _) {
    var appComponent, key, openItemsIn, path, prefixedRoutes, val;
    prefixedRoutes = {};
    for (key in routes) {
      val = routes[key];
      path = `comp/${this.moduleName}${key}`;
      prefixedRoutes[path] = val;
    }
    // console.log prefixedRoutes, @moduleName, 'modulo selecao progresso'
    parentApp.appRouter.processAppRoutes(controller, prefixedRoutes);
    appComponent = _.findWhere(window.modulo.components, {
      folder: this.moduleName
    });
    // ISSO TEM QUE IR PARA AS CONFIGURACOES DO COMPONENTE
    openItemsIn = 'caso-progresso';
    component.routeFactory = function(id) {
      return `#comp/${openItemsIn}/${id}`;
    };
    appComponent.resource.casos = appComponent.resource.casos.map(function(c) {
      c.tipo = c.tipo ? c.tipo : 'caso';
      return c;
    });
    parentApp.selecao = appComponent.resource;
    // casosLean = appComponent.resource.casos

    // for c in casosLean
    //   parentApp.atividades.add c
    //   parentApp.casos.add c
    return parentApp.selecao.titulo = appComponent.title;
  };
});
