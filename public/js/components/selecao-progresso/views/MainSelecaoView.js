// Generated by CoffeeScript 2.7.0
define(['./selecaoItemView', 'marionette'], function(ItemView, Marionette) {
  var MainSelecaoLayout;
  return MainSelecaoLayout = (function() {
    class MainSelecaoLayout extends Marionette.CompositeView {
      initialize() {
        var nuc, nucs;
        nuc = App.progresso.user.get('profissional');
        nucs = {
          '1': 1,
          '2': 0,
          '3': 2
        };
        this.collection.comparator = function(at1, at2) {
          var isPro1, isPro2, nNucs1, nNucs2, pro1, pro2;
          pro1 = at1.get('pro');
          isPro1 = pro1[nucs[nuc]];
          nNucs1 = pro1.reduce(function(m, i) {
            if (i) {
              return m + 1;
            } else {
              return m;
            }
          });
          pro2 = at2.get('pro');
          isPro2 = at2.get('pro')[nucs[nuc]];
          nNucs2 = pro2.reduce(function(m, i) {
            if (i) {
              return m + 1;
            } else {
              return m;
            }
          });
          if (isPro1 && isPro2) {
            if (nNucs1 < nNucs2) {
              return -1;
            } else if (nNucs1 > nNucs2) {
              return 1;
            }
            return 0;
          } else if (isPro1) {
            return -1;
          } else if (isPro2) {
            return 1;
          }
          return 0;
        };
        return this.collection.sort();
      }

    };

    MainSelecaoLayout.prototype.template = '#selecao-progresso-main';

    MainSelecaoLayout.prototype.childView = ItemView;

    MainSelecaoLayout.prototype.childViewContainer = '.listaCasos';

    MainSelecaoLayout.prototype.className = 'container selecao-main';

    return MainSelecaoLayout;

  }).call(this);
});
