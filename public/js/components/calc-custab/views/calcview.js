// Generated by CoffeeScript 2.7.0
// Generated by CoffeeScript 1.10.0
var extend, hasProp;

extend = function(child, parent) {
  var ctor, key;
  ctor = function() {
    this.constructor = child;
  };
  for (key in parent) {
    if (hasProp.call(parent, key)) {
      child[key] = parent[key];
    }
  }
  ctor.prototype = parent.prototype;
  child.prototype = new ctor();
  child.__super__ = parent.prototype;
  return child;
};

hasProp = {}.hasOwnProperty;

define(['backbone', 'backbone.marionette', 'jknob'], function(Backbone, Marionette) {
  var custabMainView;
  custabMainView = void 0;
  custabMainView = (function(superClass) {
    var custabMainView;
    custabMainView = function() {
      return custabMainView.__super__.constructor.apply(this, arguments);
    };
    extend(custabMainView, superClass);
    custabMainView.prototype.model = new (Backbone.Model)();
    custabMainView.prototype.className = 'item calculadoras custab';
    custabMainView.prototype.template = '#calc-custab-main-view';
    custabMainView.prototype.ui = {
      'resposta': '.condutaBox',
      'escoreBox': '.escoreBox',
      'condutaBox': '.condutaBox',
      'cigadia': '#cigadia',
      'anostab': '#anostab',
      'resultado': '.resultado'
    };
    custabMainView.prototype.events = {
      'keyup @ui.anostab': 'changeDados',
      'keyup @ui.cigadia': 'changeDados'
    };
    // 'change @ui.anostab': 'changeDados'
    // 'change @ui.cigadia': 'changeDados'
    custabMainView.prototype.changeDados = function() {
      var dados, resultado;
      dados = this.getDados();
      resultado = dados.cigadia / 20 * dados.anostab * 30;
      if (resultado >= 0 && dados.cigadia && dados.anostab) {
        this.ui.resultado.text('R$ ' + resultado.toFixed(2).replace('.', ',') + ' /MÃªs');
        this.ui.escoreBox.fadeIn();
        return this.ui.resposta.show();
      } else if (!dados.cigadia || !dados.anostab) {
        this.ui.resultado.text('Digite dois valores maiores que zero para calcular');
        this.ui.escoreBox.fadeOut();
        return this.ui.resposta.show();
      } else {
        this.ui.escoreBox.fadeOut();
        return this.ui.resposta.hide();
      }
    };
    custabMainView.prototype.getDados = function() {
      var anostab, cigadia, r;
      cigadia = 0;
      anostab = 0;
      if (this.ui.anostab.prop('value') > 0) {
        anostab = this.ui.anostab.prop('value');
      }
      if (this.ui.cigadia.prop('value') > 0) {
        cigadia = this.ui.cigadia.prop('value');
      }
      r = {
        cigadia: cigadia,
        anostab: anostab
      };
      return r;
    };
    custabMainView.prototype.onRender = function(view) {
      this.ui.escoreBox.hide();
      return this.ui.condutaBox.hide();
    };
    return custabMainView;
  })(Marionette.ItemView);
  return custabMainView;
});

// ---
// generated by js2coffee 2.2.0
