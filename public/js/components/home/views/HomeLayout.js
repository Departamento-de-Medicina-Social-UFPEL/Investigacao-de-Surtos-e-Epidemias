// Generated by CoffeeScript 1.8.0
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['./OfertaInscricaoItem'], function(OfertaInscricaoItem) {
  var HomeLayout;
  HomeLayout = (function(_super) {
    __extends(HomeLayout, _super);

    function HomeLayout() {
      return HomeLayout.__super__.constructor.apply(this, arguments);
    }

    HomeLayout.prototype.initialize = function() {};

    HomeLayout.prototype.className = 'enf-med-main container';

    HomeLayout.prototype.template = '#home-inicial';

    HomeLayout.prototype.ui = {
      'inscricoes': '.inscricoes'
    };

    HomeLayout.prototype.onRender = function() {
      var self;
      self = this;
      self.obtemOfertasAbertas();
      return self.verificaEnquetes();
    };

    HomeLayout.prototype.verificaEnquetes = function() {
      if (App.enquetes && App.user) {
        if (App.user.enquetes) {
          if (App.user.enquetes[App.moduloId]) {
            if (App.user.enquetes[App.moduloId]['cadastro']) {
              return;
            }
          }
        }
        return Backbone.history.navigate('#comp/enquetes/intro/' + App.user.cpf + '/tipo/cadastro', {
          trigger: true
        });
      }
    };

    HomeLayout.prototype.obtemOfertasAbertas = function() {
      var self;
      self = this;
      self.ui.inscricoes.empty();
      if (App.user) {
        return window.modulo.ofertasAbertas.forEach(function(o) {
          var conteudo, view;
          conteudo = o.conteudo;
          conteudo = conteudo[0].toUpperCase() + conteudo.slice(1);
          view = new OfertaInscricaoItem({
            model: new Backbone.Model({
              'nucleo': conteudo,
              'id_arouca': o.id_arouca,
              'tipo': o.tipo,
              'nome': o.nome
            })
          });
          return self.ui.inscricoes.append(view.render().el);
        });
      } else {
        return self.ui.inscricoes.append("<div class='col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center'> <button class='btn btn-success display-4 gotoForm'>Inscreva-se aqui</button> </div>");
      }
    };

    HomeLayout.prototype.events = {
      'click .gotoUnidade': 'gotoUnidade',
      'click .gotoForm': 'gotoForm',
      'click .gotoCasos': 'gotoCasos',
      'click .gotoCalculadoras': 'gotoCalculadoras',
      'click .gotoMaterial': 'gotoMaterial',
      'click .gotoTestes': 'gotoTestes',
      'click .gotoInicialEnfermagem': 'gotoInicialEnfermagem',
      'click .gotoFinalEnfermagem': 'gotoFinalEnfermagem',
      'click .gotoInicialMedicina': 'gotoInicialMedicina',
      'click .gotoFinalMedicina': 'gotoFinalMedicina',
      'click .gotoInicialOdontologia': 'gotoInicialOdontologia',
      'click .gotoFinalOdontologia': 'gotoFinalOdontologia',
      'click .gotoFinalInterdisciplinar': 'gotoFinalInterdisciplinar',
      'click .gotoInicialInterdisciplinar': 'gotoInicialInterdisciplinar',
      'click .gotoVideo': 'gotoVideo'
    };

    HomeLayout.prototype.gotoForm = function() {
      return Backbone.history.navigate('#comp/cadastro', {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoUnidade = function(e) {
      if (!App.user) {
        return this.gotoForm();
      }
    };

    HomeLayout.prototype.gotoCasos = function() {
      if (!App.user) {
        this.gotoForm();
      }
      return Backbone.history.navigate('#comp/selecao-progresso', {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoCalculadoras = function() {
      return Backbone.history.navigate('#comp/calculadoras', {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoMaterial = function() {
      return Backbone.history.navigate('#comp/materiais', {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoTestes = function() {
      if (!App.user) {
        this.gotoForm();
      }
      return Backbone.history.navigate('#comp/selecao-testes-progresso', {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoInicialInterdisciplinar = function() {
      var inicialDaPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      inicialDaPro = App.testes.filter(function(d) {
        return /inicial/img.test(d.get('titulo'));
      })[0];
      if (!inicialDaPro) {
        Backbone.history.navigate("comp/selecao-testes-progresso", {
          trigger: true
        });
      }
      _id = inicialDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoInicialEnfermagem = function() {
      var inicialDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2
      };
      uPro = proMap['1'];
      inicialDaPro = App.testes.filter(function(d) {
        return /inicial/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      if (!inicialDaPro) {
        Backbone.history.navigate("comp/selecao-testes-progresso", {
          trigger: true
        });
      }
      _id = inicialDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoInicialMedicina = function() {
      var inicialDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2
      };
      uPro = proMap['2'];
      inicialDaPro = App.testes.filter(function(d) {
        return /inicial/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      if (!inicialDaPro) {
        Backbone.history.navigate("comp/selecao-testes-progresso", {
          trigger: true
        });
      }
      _id = inicialDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoInicialOdontologia = function() {
      var inicialDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2
      };
      uPro = proMap['3'];
      inicialDaPro = App.testes.filter(function(d) {
        return /inicial/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      if (!inicialDaPro) {
        Backbone.history.navigate("comp/selecao-testes-progresso", {
          trigger: true
        });
      }
      _id = inicialDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoFinalInterdisciplinar = function() {
      var finalDaPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      console.log(App.masterFinalLockInterdisciplinar(), 'App.masterFinalLockInterdisciplinar');
      if (App.masterFinalLockInterdisciplinar()) {
        return Backbone.history.navigate("comp/home/teste-bloqueado", {
          trigger: true
        });
      }
      finalDaPro = App.testes.filter(function(d) {
        return /final/img.test(d.get('titulo'));
      })[0];
      console.log(App.masterFinalLockInterdisciplinar(), 'App.masterFinalLockInterdisciplinar', finalDaPro);
      _id = finalDaPro.get('_id');
      console.log(App.masterFinalLockInterdisciplinar(), 'App.masterFinalLockInterdisciplinar', finalDaPro, _id);
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoFinalEnfermagem = function() {
      var finalDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2,
        '0': 9
      };
      uPro = proMap['1'];
      if (App.masterFinalLockEnfermagem()) {
        return Backbone.history.navigate("comp/home/teste-bloqueado", {
          trigger: true
        });
      }
      finalDaPro = App.testes.filter(function(d) {
        return /final/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      _id = finalDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoFinalMedicina = function() {
      var finalDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2,
        '0': 9
      };
      uPro = proMap['2'];
      if (App.masterFinalLockMedicina()) {
        return Backbone.history.navigate("comp/home/teste-bloqueado", {
          trigger: true
        });
      }
      finalDaPro = App.testes.filter(function(d) {
        return /final/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      _id = finalDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoFinalOdontologia = function() {
      var finalDaPro, proMap, uPro, _id;
      if (!App.user) {
        this.gotoForm();
      }
      proMap = {
        '1': 1,
        '2': 0,
        '3': 2,
        '0': 9
      };
      uPro = proMap['3'];
      if (App.masterFinalLockOdontologia()) {
        return Backbone.history.navigate("comp/home/teste-bloqueado", {
          trigger: true
        });
      }
      finalDaPro = App.testes.filter(function(d) {
        return /final/img.test(d.get('titulo')) && d.get('pro')[uPro];
      })[0];
      _id = finalDaPro.get('_id');
      return Backbone.history.navigate("comp/teste-progresso/" + _id, {
        trigger: true
      });
    };

    HomeLayout.prototype.gotoVideo = function(e) {
      var ds;
      ds = $(e.target).attr("data-source");
      if (!ds) {
        ds = $(e.target.parentNode).attr("data-source");
      }
      if (ds) {
        return Backbone.history.navigate('comp/video-player/' + ds, {
          trigger: true
        });
      } else {
        return Backbone.history.navigate('comp/video-player', {
          trigger: true
        });
      }
    };

    return HomeLayout;

  })(Marionette.LayoutView);
  return HomeLayout;
});
