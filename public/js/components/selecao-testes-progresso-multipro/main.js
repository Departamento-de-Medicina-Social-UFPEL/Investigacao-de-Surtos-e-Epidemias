// Generated by CoffeeScript 1.8.0
define(['./controller', './routes', './models/Caso', 'utils'], function(controller, routes, Caso, utils) {
  return function(component, parentApp, Backbone, Marionette, $, _) {
    var appComponent, itemModule, key, path, prefixedRoutes, referenceModule, t, testesLean, val, _i, _len;
    prefixedRoutes = {};
    for (key in routes) {
      val = routes[key];
      path = "comp/selecao-testes-progresso" + key;
      prefixedRoutes[path] = val;
    }
    parentApp.appRouter.processAppRoutes(controller, prefixedRoutes);
    appComponent = _.findWhere(window.modulo.components, {
      folder: this.moduleName
    });
    itemModule = '#comp/teste-progresso';
    component.routeFactory = function(id) {
      return "" + itemModule + "/" + id;
    };
    referenceModule = '#comp/caso-progresso';
    component.refRouteFactory = function(id) {
      return "" + referenceModule + "/" + id;
    };
    if (!window.App['selecao-testes-progresso']) {
      window.App['selecao-testes-progresso'] = {};
      window.App['selecao-testes-progresso'].refRouteFactory = component.refRouteFactory;
    }
    appComponent.resource.casos = appComponent.resource.casos.map(function(c) {
      c.tipo = 'teste';
      c.posTeste = !(/inicial/img.test(c.titulo));
      return c;
    });
    $('.dropdown-componentes').find('.dropdown-menu a[href="#comp/selecao-testes-progresso-multipro"]').attr('href', '#comp/selecao-testes-progresso');
    parentApp.selecaoTestes = appComponent.resource;
    testesLean = appComponent.resource.casos;
    for (_i = 0, _len = testesLean.length; _i < _len; _i++) {
      t = testesLean[_i];
      parentApp.atividades.add(t);
      parentApp.testes.add(t);
    }
    return parentApp.selecaoTestes.titulo = appComponent.title;
  };
});
