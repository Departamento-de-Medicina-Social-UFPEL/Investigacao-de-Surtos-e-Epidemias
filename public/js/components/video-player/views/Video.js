// Generated by CoffeeScript 2.7.0
define(['marionette'], function(Marionette) {
  var VideoLayout;
  return VideoLayout = (function() {
    class VideoLayout extends Marionette.ItemView {
      initialize() {
        return console.log(this.model, 'modelo video');
      }

      gotoReturn() {
        if (App.appRouter.historico.length > 1) {
          return App.appRouter.previous();
        } else {
          return App.appRouter.navigate("comp/materiais", true);
        }
      }

      onRender() {
        var $el, posterName, videoEl;
        posterName = this.model.get('poster');
        console.log(this.model, 'modelo video');
        $el = $(this.el);
        videoEl = $el.find('video');
        videoEl.prop('volume', 0.5);
        return videoEl.on('playing', function() {
          var base, jaAnotou, jaeh;
          if (App.user) {
            if ((base = App.user).especifico == null) {
              base.especifico = [];
            }
            jaAnotou = _.findWhere(App.user.especifico, {
              modulo: window.modulo._id,
              name: posterName
            });
            jaeh = null;
            if (jaAnotou) {
              jaeh = jaAnotou.value;
            }
            if (jaeh) {
              return jaeh;
            }
            App.user.especifico.push({
              modulo: window.modulo._id,
              name: posterName,
              value: true
            });
            return App.local.set("user", App.user);
          }
        });
      }

      // App.execute 'storeUser', App.user
      onDestroy() {
        $('body').removeAttr('style').css({
          display: 'block'
        });
        if (App.main.currentView) {
          return App.appRouter.previous();
        }
        return App.appRouter.navigate('/', {
          'trigger': true
        });
      }

    };

    VideoLayout.prototype.template = _.template($('#video-player-video').html());

    VideoLayout.prototype.className = 'container-fluid';

    // console.log @collection, 'coll video'
    // console.log @model, 'modelo unidade'
    VideoLayout.prototype.events = {
      'click .gotoReturn': 'gotoReturn'
    };

    return VideoLayout;

  }).call(this);
});
