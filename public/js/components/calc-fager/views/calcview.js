// Generated by CoffeeScript 1.8.0
var extend, hasProp;

extend = function(child, parent) {
  var ctor, key;
  ctor = function() {
    this.constructor = child;
  };
  for (key in parent) {
    if (hasProp.call(parent, key)) {
      child[key] = parent[key];
    }
  }
  ctor.prototype = parent.prototype;
  child.prototype = new ctor;
  child.__super__ = parent.prototype;
  return child;
};

hasProp = {}.hasOwnProperty;

define(['backbone', 'backbone.marionette', 'jknob'], function(Backbone, Marionette) {
  var FagerMainView;
  FagerMainView = void 0;
  FagerMainView = (function(superClass) {
    var FagerMainView;
    FagerMainView = function() {
      return FagerMainView.__super__.constructor.apply(this, arguments);
    };
    extend(FagerMainView, superClass);
    FagerMainView.prototype.model = new Backbone.Model;
    FagerMainView.prototype.className = 'item calculadoras fager';
    FagerMainView.prototype.template = '#calc-fager-main-view';
    FagerMainView.prototype.ui = {
      'resposta': '.condutaBox',
      'resultado': 'input.grafResult',
      'escoreBox': '.escoreBox',
      'condutaBox': '.condutaBox',
      'descricao': '.descricao',
      'mortalidade': '.mortalidade',
      'qst10': '#Q10',
      'qst11': '#Q11',
      'qst12': '#Q12',
      'qst13': '#Q13',
      'qst20': '#Q20',
      'qst21': '#Q21',
      'qst22': '#Q22',
      'qst23': '#Q23',
      'qst30': '#Q30',
      'qst31': '#Q31',
      'qst40': '#Q40',
      'qst41': '#Q41',
      'qst50': '#Q50',
      'qst51': '#Q51',
      'qst60': '#Q60',
      'qst61': '#Q61'
    };
    FagerMainView.prototype.events = {
      'change @ui.qst10': 'changeDados',
      'change @ui.qst11': 'changeDados',
      'change @ui.qst12': 'changeDados',
      'change @ui.qst13': 'changeDados',
      'change @ui.qst20': 'changeDados',
      'change @ui.qst21': 'changeDados',
      'change @ui.qst22': 'changeDados',
      'change @ui.qst23': 'changeDados',
      'change @ui.qst30': 'changeDados',
      'change @ui.qst31': 'changeDados',
      'change @ui.qst40': 'changeDados',
      'change @ui.qst41': 'changeDados',
      'change @ui.qst50': 'changeDados',
      'change @ui.qst51': 'changeDados',
      'change @ui.qst60': 'changeDados',
      'change @ui.qst61': 'changeDados'
    };
    FagerMainView.prototype.changeDados = function() {
      var dados, q1, resultado, tab, total;
      q1 = void 0;
      dados = void 0;
      total = void 0;
      resultado = void 0;
      tab = void 0;
      dados = this.getDados();
      total = parseFloat(dados.q1) + parseFloat(dados.q2) + parseFloat(dados.q3) + parseFloat(dados.q4) + parseFloat(dados.q5) + parseFloat(dados.q6);
      tab = this.tabela.crb;
      resultado = _(tab).find(function(item) {
        return item.pontos.indexOf(total) !== -1;
      });
      console.log(resultado.descricao);
      this.ui.resultado.val(total).trigger('change');
      this.ui.descricao.text(resultado.descricao);
      this.ui.escoreBox.fadeIn();
      return this.ui.resposta.show();
      if (total) {

      } else {

      }
    };
    FagerMainView.prototype.getDados = function() {
      var q1, q2, q3, q4, q5, q6, r;
      r = void 0;
      q1 = void 0;
      q2 = void 0;
      q3 = void 0;
      q4 = void 0;
      q5 = void 0;
      q6 = void 0;
      q1 = q2 = q3 = q4 = q5 = q6 = 0;
      if (this.ui.qst10.prop('checked')) {
        q1 = 0;
      }
      if (this.ui.qst11.prop('checked')) {
        q1 = 1;
      }
      if (this.ui.qst12.prop('checked')) {
        q1 = 2;
      }
      if (this.ui.qst13.prop('checked')) {
        q1 = 3;
      }
      if (this.ui.qst20.prop('checked')) {
        q2 = 0;
      }
      if (this.ui.qst21.prop('checked')) {
        q2 = 1;
      }
      if (this.ui.qst22.prop('checked')) {
        q2 = 2;
      }
      if (this.ui.qst23.prop('checked')) {
        q2 = 3;
      }
      if (this.ui.qst30.prop('checked')) {
        q3 = 0;
      }
      if (this.ui.qst31.prop('checked')) {
        q3 = 1;
      }
      if (this.ui.qst40.prop('checked')) {
        q4 = 0;
      }
      if (this.ui.qst41.prop('checked')) {
        q4 = 1;
      }
      if (this.ui.qst50.prop('checked')) {
        q5 = 0;
      }
      if (this.ui.qst51.prop('checked')) {
        q5 = 1;
      }
      if (this.ui.qst60.prop('checked')) {
        q6 = 0;
      }
      if (this.ui.qst61.prop('checked')) {
        q6 = 1;
      }
      r = {
        q1: q1,
        q2: q2,
        q3: q3,
        q4: q4,
        q5: q5,
        q6: q6
      };
      return r;
    };
    FagerMainView.prototype.tabela = {
      crb: [
        {
          pontos: [0, 1, 2],
          descricao: 'muito baixa dependência física'
        }, {
          pontos: [3, 4],
          descricao: 'baixa dependência física'
        }, {
          pontos: [5],
          descricao: 'média dependência física'
        }, {
          pontos: [6, 7],
          descricao: 'elevada dependência física'
        }, {
          pontos: [8, 9, 10],
          descricao: 'muito elevada dependência física'
        }
      ]
    };
    FagerMainView.prototype.setKnob = function(max) {
      max = 10;
      return this.ui.resultado.knob({
        width: '190',
        lineCap: 'round',
        inline: true,
        bgColor: '#f1f1f1',
        inputColor: '#444',
        max: max,
        thickness: '.2',
        readOnly: true,
        format: function(value) {
          return value;
        }
      });
    };
    FagerMainView.prototype.onRender = function(view) {
      this.setKnob();
      this.ui.escoreBox.hide();
      return this.ui.condutaBox.hide();
    };
    return FagerMainView;
  })(Marionette.ItemView);
  return FagerMainView;
});
