// Generated by CoffeeScript 1.8.0
var getDadosSituacaoMonitoramento;

define([], function() {
  return function(data) {
    var modelo, tipo;
    console.log('modelo grafico', data);
    tipo = data.get('tipo');
    modelo = (function() {
      switch (tipo) {
        case 'empilhado':
          return getDadosSituacaoMonitoramento(data);
        default:
          return getDadosSituacaoMonitoramento(data);
      }
    })();
    return modelo;
  };
});

getDadosSituacaoMonitoramento = function(modelo) {
  var andamento, dados, encerrado, naoIniciado;
  console.log('modelo grafico dados', modelo);
  dados = modelo.get('dados');
  naoIniciado = andamento = encerrado = [];
  modelo.set('categorias', dados.map(function(d) {
    var fim;
    fim = modelo.get('tipo') !== 'dia' ? ' à ' + d.periodoFim : '';
    return d.periodoInicio + fim;
  }));
  dados.forEach(function(d) {
    naoIniciado.push(parseFloat(d.nrNaoIniciados) * 100 / d.nrMonitorados);
    andamento.push(parseFloat(d.nrEmAndamento) * 100 / d.nrMonitorados);
    return encerrado.push(parseFloat(d.nrEncerrados) * 100 / d.nrMonitorados);
  });
  modelo.set('series', [
    {
      name: "Não iniciados",
      data: naoIniciado
    }, {
      name: "Em andamento",
      data: andamento
    }, {
      name: "Encerrados",
      data: encerrado
    }
  ]);
  return modelo;
};
