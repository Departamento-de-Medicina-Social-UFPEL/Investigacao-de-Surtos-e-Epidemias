// Generated by CoffeeScript 1.8.0
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define(['./GraficoItemView'], function(GraficoItemView) {
  var GraficosView;
  GraficosView = (function(_super) {
    __extends(GraficosView, _super);

    function GraficosView() {
      return GraficosView.__super__.constructor.apply(this, arguments);
    }

    GraficosView.prototype.childView = GraficoItemView;

    GraficosView.prototype.childViewContainer = '.list-graficos';

    GraficosView.prototype.buildChildView = function(child, ChildViewClass, childViewOptions) {
      this.model.set('tipo', child.get('tipo'));
      this.model.set('titulo', child.get('titulo'));
      this.model.set('tituloy', child.get('tituloy'));
      return GraficoItemView(this.model);
    };

    GraficosView.prototype.childViewContainer = '.list-graficos';

    GraficosView.prototype.initialize = function() {
      var dados, dt_maior, dt_menor, nr_total_casos, nr_total_contatos;
      dados = this.model.get('dados');
      dt_menor = dados[0].periodoInicio;
      dt_maior = dados[0].periodoFim;
      nr_total_casos = 0;
      nr_total_contatos = 0;
      dados.map((function(_this) {
        return function(d) {
          var dtMaior, dtMenor;
          dtMenor = new Date(d.periodoInicio);
          dtMaior = new Date(d.periodoFim);
          if (dtMenor < new Date(dt_menor)) {
            dt_menor = d.periodoInicio;
          }
          if (dtMaior > new Date(dt_maior)) {
            dt_maior = d.periodoFim;
          }
          nr_total_casos += parseInt(d.nrConfirmado);
          nr_total_contatos += parseInt(d.nrEncerrados);
          return d;
        };
      })(this));
      this.model.set('dt_inicio', dt_menor);
      this.model.set('dt_fim', dt_maior);
      this.model.set('nr_total_casos', nr_total_casos);
      this.model.set('nr_total_contatos', nr_total_contatos);
      return this.model.set('ano', dt_menor.split('/')[2]);
    };

    GraficosView.prototype.className = ' container';

    GraficosView.prototype.template = '#monitoramento-covid-graficos';

    GraficosView.prototype.ui = {};

    GraficosView.prototype.onRender = function() {
      var self;
      self = this;
      return console.log(this.collection, 'collection');
    };

    GraficosView.prototype.events = {};

    return GraficosView;

  })(Marionette.CompositeView);
  return GraficosView;
});
