// Generated by CoffeeScript 1.8.0
define(['backbone', './views/EnfMedMainLayout', './views/ErrorView'], function(Backbone, EnfMedMainLayout, ErrorView) {
  return {
    "iniciaPagina": function(callback) {
      var dtAtual;
      dtAtual = new Date();
      window.modulo.ofertasAbertas = window.modulo.ofertas.filter(function(o) {
        return dtAtual >= (new Date(o.data_inicio)) && (new Date(o.data_fim_matricula)) >= dtAtual;
      });
      return App.main.show(new EnfMedMainLayout());
    },
    "error": function(msg) {
      console.log('érro', msg);
      App.modals.destroyAll();
      if (App.modals.currentView) {
        App.modals.destroyAll();
      }
      if (!App.user) {
        window.location.hash = '';
      }
      msg = "Não foi possível salvar o seu progresso, para evitar a perda dos dados, verifique sua conexão e tente novamente!";
      return App.modals.show(new ErrorView({
        msg: msg
      }));
    }
  };
});
