// Generated by CoffeeScript 1.8.0
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

define([], function() {
  var Introbox;
  Introbox = (function(_super) {
    __extends(Introbox, _super);

    function Introbox() {
      return Introbox.__super__.constructor.apply(this, arguments);
    }

    Introbox.prototype['template'] = '#saiba-mais-introbox';

    Introbox.prototype['className'] = 'container-fluid introbox-container';

    Introbox.prototype['initialize'] = function(options) {};

    Introbox.prototype.ui = {
      'voltarUnidade': '#voltarUnidade',
      'unidade': '#unidade'
    };

    Introbox.prototype.onRender = function() {
      var self, short, uni, unis;
      self = this;
      console.log(this.model, 'modelo introbox');
      unis = _.where(window.modulo.components, {
        folder: 'unidade-progresso'
      });
      uni = unis.filter(function(u) {
        var casos;
        if (!u.resource) {
          return false;
        }
        casos = u.resource.casos.filter(function(c) {
          return c._id === self.model.get('_id');
        });
        return casos.length > 0;
      });
      if (uni.length > 0) {
        short = uni[0].short;
        this.ui.voltarUnidade.css({
          display: 'block'
        });
        this.ui.voltarUnidade.attr({
          href: "#comp/unidade-progresso/" + short
        });
        return this.ui.unidade.html(short);
      }
    };

    return Introbox;

  })(Marionette.ItemView);
  return Introbox;
});
