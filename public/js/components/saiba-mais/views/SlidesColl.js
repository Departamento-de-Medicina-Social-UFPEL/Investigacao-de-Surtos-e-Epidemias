// Generated by CoffeeScript 2.7.0
define(['./SlideItemView'], function(SlideItemView) {
  var SlidesCollView;
  SlidesCollView = (function() {
    class SlidesCollView extends Marionette.CollectionView {
      ['buildChildView'](child, ChildViewClass, childViewOptions) {
        var s;
        s = new SlideItemView({
          model: child,
          tagName: 'section',
          className: "slide slide-saiba-mais item hide item-" + this.iterador
        });
        this.iterador++;
        return s;
      }

      ['initialize']() {
        this.iterador = 0;
        return this.listenTo(this, 'childview:respondeu', function(itemView, data) {
          App.main.currentvi;
          return this.showTillNext(itemView, data);
        });
      }

      ['onRender']() {
        console.log(this.model, this.collection, 'teste colection');
        this.children.each(function(view) {
          var imgs;
          imgs = view.$el.find('img');
          imgs.css('width', '100%');
          return imgs.each(function(k, v) {
            var src;
            src = $(v).attr('src');
            return $(v).attr('src', `/static/${src}`);
          });
        });
        // table = view.$el.find('table')
        // table.prop('border','0')
        // table.addClass('table table-striped')
        this.questoes = this.children.filter(function(view) {
          return view.model.get('tipo').match(/questao.*/ig);
        });
        return this.questoes.forEach(function(q, i) {
          q.$el.prop({
            id: 'questao_' + i
          });
          return q.$el.attr('data-seqid', i);
        });
      }

      //console.log @questaoDaVez, 'davezz'
      //@questoes[@questaoDaVez].$el.find('section').hide()
      //@questoes[@questaoDaVez].$el.nextAll('section').hide()
      // @questoes[@questaoDaVez].$el.addClass 'daVez'
      ['showTillNext'](view) {
        var el, j, len, nextQuest, qView, ref, results;
        el = view.$el;
        nextQuest = el.nextAll('section.slide[class*="quest"]')[0];
        ref = this.questoes;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          qView = ref[j];
          results.push(qView.$el.removeClass('daVez'));
        }
        return results;
      }

    };

    SlidesCollView.prototype['tagName'] = 'div';

    SlidesCollView.prototype['class'] = 'listaSlides';

    SlidesCollView.prototype['childView'] = Backbone.View;

    SlidesCollView.prototype['questaoDaVez'] = 0;

    return SlidesCollView;

  }).call(this);
  // if nextQuest
  //   $(nextQuest).prevAll('section').show()
  //   #$(nextQuest).addClass('daVez').show()
  // else
  //   @children.each (view) ->
  //     do view.$el.show
  return SlidesCollView;
});
